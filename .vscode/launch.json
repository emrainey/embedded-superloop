{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Cortex-Debug (JLink) Jarnax",
            "cwd": "${workspaceRoot}",
            "executable": "build/stm32-basic",
            "request": "launch",
            "type": "cortex-debug",
            "servertype": "jlink",
            "interface": "swd",
            "runToMain": true,
            "device": "STM32F407VE",
            "internalConsoleOptions": "openOnSessionStart",
            //"internalConsoleOptions": "openOnFirstSessionStart",
            "svdFile": "${workspaceFolder}/scripts/STM32F407.svd",
            //"preLaunchTask": "Build",
            "showDevDebugOutput": true,
            "preLaunchCommands": [
                "set mem inaccessible-by-default off"
            ],
            "preRestartCommands": [
                "monitor reset 0"
            ]
        },
        {
            "name": "(gdb) Jlink Jarnax",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/jarnax-demo.elf",
            "args": [],
            "stopAtEntry": true,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "logging": {
                "trace": true,
                //"traceResponse": true,
                "engineLogging": true,
                "programOutput": true,
                "moduleLoad": true,
                "exceptions": true
            },
            /* My Stuff Begin */
            "debugServerArgs": "-if swd -port 2331 -swoport 2332 -telnetport 2333 -device STM32F407VE -s",
            "serverLaunchTimeout": 10000,
            "filterStderr": false,
            "filterStdout": true,
            "serverStarted": "Connected to target",
            //"preLaunchTask": "Build",
            "miDebuggerPath": "/Applications/ARM/bin/arm-none-eabi-gdb",
            "debugServerPath": "/Applications/SEGGER/JLink/JLinkGDBServerCLExe",
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "text": "-environment-cd ${workspaceRoot}"
                },
                {
                    "text": "-gdb-set target-async on"
                },
                //{ "text": "source c:/Users/hdm/.vscode/extensions/marus25.cortex-debug-0.2.3/support/gdbsupport.init"}
                {
                    "text": "-interpreter-exec console \"set mem inaccessible-by-default off\""
                },
                {
                    "text": "-target-select remote localhost:50000"
                },
                {
                    "text": "-file-exec-and-symbols build/jarnax.elf"
                },
                {
                    "text": "-interpreter-exec console \"monitor halt\""
                },
                {
                    "text": "-interpreter-exec console \"monitor reset\""
                },
                {
                    "text": "monitor device = STM32F407VE"
                },
                {
                    "text": "load '${workspaceFolder}/build/jarnax.elf'"
                },
                {
                    "text": "-target-download"
                },
                {
                    "text": "-interpreter-exec console \"monitor reset\""
                },
                {
                    "text": "-enable-pretty-printing"
                }
            ],
        },
    ]
}